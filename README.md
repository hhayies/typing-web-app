# VS My Typeing
#### Video Demo:  https://www.youtube.com/watch?v=ZUOSDAWg2DY
#### プロジェクトの説明
今回私が作成したプロジェクトは、タイトルの通り、**自分とタイピングの速さを競うことができるWebアプリ**です。
Webアプリの概要としては、まずユーザのタイピングの速さを記録するための、１人プレイモードと、過去に記録された自分と競うための対戦モードの２つのプレイモードを用意しました。
**１人プレイモードでは**、決められた時間のなかで、次々と言葉が表示されるので、時間内にどれだけ多くの言葉を入力できるかが記録できるようになっています。
**対戦モードでは**、1人プレイモードで遊んだ時に記録した、タイピング速度や正確さの情報を基にした過去の自分と戦うことが出来ます。

#### 各ファイルの内容や機能
今回のプロジェクトでは、html、css、javascript、python、csv、mp3の6種類のファイルを作成しました。基本的なWebアプリの設定や画面表示などはhtml、css、javascriptのファイルで行い、1人プレイモード用と、対戦モード用で別々に作成しています。

１人プレイモード用で使用しているファイルは、以下の３つです
- index.html
- style.css
- script.js

**index.html**では、初期画面や、ゲームプレイ画面などのいくつかの画面表示を用意し、javascriptで管理したイベントごとに表示をしたり、隠したりすることで、１つのページ間で、動作を行えるようにしました。**style.css**では、全てのデザインやアニメーションの設定を行っており、bootstrapはボタンの見た目などを整えたりなどの、補助的に使用しました。**script.js**では、ボタンを押されたときや、画面の切り替えなどのイベント、タイマーの管理、データの記録などを行うようにしています。タイマーの管理としては、ゲームがスタートした時にnew Date()オブジェクトを呼び出し、その時刻を変数startTimeとして保持しておき、１秒ごとにnew Date()を再び呼び出し、その値からstartTimeを引くことで、正確に1秒を数えられるようにしました。

**データの記録には、ローカルストレージを用いており、記録するデータの内容は、１秒間にタイプした数をaverageとして、１単語あたりのタイプ速度をspeedとして、タイピングの正確さをaccuracyとして記録している。**

対戦モードで使用しているファイルは、以下の３つです
- battle.html
- battle.css
- battle.js

それぞれのファイルの役割は、１人プレイモードの時とほとんど同じで、変更した主な機能としては、**script.js**で、過去の記録を基にしたダミーのユーザを作成し、ゲーム中の処理を加えたことです。ダミーのユーザの処理としては、１人プレイモード用で記録した、setintervalの時間にspeedを設定することで、speedの時間で１単語ずつ入力されたように見せています。また、より正確に模倣するために、正確さを基にして、タイプミスが発生するようにし、ミスが発生したときは、入力を進めないようにしました。また、最後の結果表示画面に、前回との比較値を示すことで、自分がどれくらいタイピング能力が向上しているかを簡単に確認できるようにしました。

pythonでは、ゲームをプレイするときに表示する言葉を作成するために、web上にある言葉をスクレイピングし、取得した情報を辞書型のリストにして、csvファイルに変換する作業を行っています。スクレイピングで言葉を取得した際には、余分な言葉がついている場合もあるので、その条件判定には正規表現を用いることで、自分が欲しい言葉だけを取得できるようにしました。

mp3ファイルは、ゲームのプレイ中や、終了時、ボタンを押したときなどに流すための音楽を保存しており、ユーザを退屈させずにゲームをプレイできるように工夫しました。

#### この設計にした理由
今回、webアプリを開発する際に初めはデータの記録をsqlを持いたデータベース上で保存しようと考えていましたが、実際に開発を進めると、今回のwebアプリでは、ほとんどの処理をhtml、css、javascriptだけで記述できることが分かり、pythonはdatabase接続だけでもちいることになるため、それだけのためにpythonの処理を追加するのはもったいないと思い、javascriptで保存できる機能がないか調べたところ、ローカルストレージを用いることで、簡単にデータの記録や取得を行えることが分かったので、データベースでの記録からローカルストレージの記録に切り替えました。
また、ログイン機能なども持たせようと考えて今したが、今回のアプリでは、ユーザの個人情報や、口座記録などの大切な情報は扱わないため、ユーザに遊んでもらいやすいようするためにログイン機能を実装することはやめました。

表示するための言葉を最初は、手入力でリストに追加していこうと考えていたが、手入力だとたくさんの言葉を入力するだけで、時間がかかってしまい、それだけで開発の時間がなくなってしまうので、スクレイピングで情報を収集することで、たくさんの言葉を短時間で作成できると思い、pythonでのスクレイピングを行った。

#### 改善点
今回のシステムでは、決められたローマ字表記の入力しか受け付けないようになっており、複数の入力に対応していないため、複数の入力に対応できるような機能を実装できるようにする。具体的には、連想配列などのリストを用いて、全ての単語と、入力方法を紐づけるなどして、入力判定を行う際には、そのリストを参照するようにするなどが考えられる。
